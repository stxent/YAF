#Copyright (C) 2015 xent
#Project is distributed under the terms of the GNU General Public License v3.0

PROJECT_FLAGS += CONFIG_FAT_SECTOR CONFIG_FAT_POOLS CONFIG_FAT_THREADS
PROJECT_FLAGS += CONFIG_FAT_TIME CONFIG_FAT_UNICODE CONFIG_FAT_WRITE
PROJECT_FLAGS += CONFIG_DEBUG CONFIG_DEBUG_LEVEL CONFIG_MMI_STATUS
PROJECT_FLAGS += CONFIG_LIBSHELL CONFIG_SHELL CONFIG_SHELL_BUFFER
ifeq ($(CONFIG_OVERRIDE_LENGTH),y)
  PROJECT_FLAGS += CONFIG_FILENAME_LENGTH
endif

LIBRARY_SOURCES := $(shell find libyaf -name *.c)
LIBRARY_OBJECTS = $(LIBRARY_SOURCES:%.c=$(OUTPUT_DIR)/%.o)
CSOURCES += $(LIBRARY_SOURCES)

LIBRARY_FILE = $(OUTPUT_DIR)/lib$(PROJECT).a
TARGETS += $(LIBRARY_FILE)

$(LIBRARY_FILE): $(OPTION_FILE) $(LIBRARY_OBJECTS)
	$(AR) -r $@ $(filter-out $(OPTION_FILE),$^)
